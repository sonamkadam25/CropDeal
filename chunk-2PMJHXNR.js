import{a as S,b as p,c as O,d as y,f as k,h as E,i as F,m as T,o as L}from"./chunk-MDTR3QT2.js";import{d as P,e as v,h as _}from"./chunk-YHE6EI6Y.js";import{b as C,d as M}from"./chunk-VARBTXGR.js";import{Ea as u,Kb as w,Pa as c,Qa as f,Ra as h,Sa as t,Ta as n,Ua as l,Ya as g,db as i,eb as x,fb as b,va as r,za as s}from"./chunk-LATPFVPJ.js";var R=class m{constructor(a,o,e){this.fb=a;this.http=o;this.router=e;this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",p.required]})}loginForm;message="";toastMessage="";showToast=!1;ngOnInit(){console.log("LoginComponent loaded..")}showPassword=!1;togglePasswordVisibility(){this.showPassword=!this.showPassword}showSuccessToast(a){this.toastMessage=a,this.showToast=!0,setTimeout(()=>{this.showToast=!1},3e3)}onSubmit(){if(this.loginForm.invalid){this.toastMessage="Please fill in all fields correctly.",this.showToast=!0;return}let a=this.loginForm.value;this.http.post("http://localhost:8000/FARMERSERVICE/farmers/login",a).subscribe({next:o=>{this.showSuccessToast("Login Successfully!"),this.loginForm.reset();let e=o.role,d=o.token;localStorage.setItem("token",d),localStorage.setItem("role",e),console.log("Role is:",e);let I=o.email;localStorage.setItem("email",I),setTimeout(()=>{e==="FARMER"?this.router.navigate(["/farmer/dashboard"]):e==="DEALER"?this.router.navigate(["/dealer/dashboard"]):e==="ADMIN"?this.router.navigate(["/admin/dashboard"]):(this.toastMessage="Invalid role!",this.showToast=!0)},100),console.log(o)},error:o=>{this.showSuccessToast(o.error||"Login failed!")}})}static \u0275fac=function(o){return new(o||m)(s(T),s(C),s(P))};static \u0275cmp=u({type:m,selectors:[["app-login"]],decls:33,vars:10,consts:[[1,"register-container"],[1,"register-card"],[1,"tagline"],[3,"ngSubmit","formGroup"],["type","email","formControlName","email","placeholder","Enter your email"],[1,"password-wrapper"],["formControlName","password","placeholder","Create a password",3,"type"],[1,"toggle-icon",3,"click"],["type","submit"],[1,"extra-links"],["routerLink","/auth/register"],["routerLink","/auth/forgot-password"],[1,"message"],[1,"toast-container","position-fixed","bottom-0","end-0","p-3",2,"z-index","1050"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-success","border-0"],[1,"d-flex"],[1,"toast-body"]],template:function(o,e){o&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),i(3,"\u{1F33E} Login"),n(),t(4,"p",2),i(5,"Welcome back to CropDeal"),n(),t(6,"form",3),g("ngSubmit",function(){return e.onSubmit()}),t(7,"label"),i(8,"Email"),n(),l(9,"input",4),t(10,"label"),i(11,"Password"),n(),t(12,"div",5),l(13,"input",6),t(14,"span",7),g("click",function(){return e.togglePasswordVisibility()}),l(15,"i"),n()(),t(16,"button",8),i(17,"Login"),n()(),t(18,"div",9)(19,"p"),i(20,"New user? "),t(21,"a",10),i(22,"Register here"),n()(),t(23,"p")(24,"a",11),i(25,"Forgot password?"),n()()(),t(26,"p",12),i(27),n()()(),t(28,"div",13)(29,"div",14)(30,"div",15)(31,"div",16),i(32),n()()()()),o&2&&(r(6),c("formGroup",e.loginForm),r(7),c("type",e.showPassword?"text":"password"),r(2),h(e.showPassword?"fa fa-eye":"fa fa-eye-slash"),r(12),x(e.message),r(2),f("show",e.showToast)("hide",!e.showToast),r(3),b(" ",e.toastMessage," "))},dependencies:[w,L,k,S,O,y,E,F,_,v,M],styles:["body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background:linear-gradient(to right,#f7fcf7,#e2f1e9);margin:0;padding:0}.register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:100px;padding-bottom:50px;min-height:calc(130vh - 80px);background-color:#f3fdf4}.register-card[_ngcontent-%COMP%]{background-color:#fff;padding:30px 25px;border-radius:12px;box-shadow:0 4px 12px #00000014;width:100%;max-width:440px;border:1px solid #dfe9e4;margin-top:40px;height:440px}.register-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#2e8b57;margin-bottom:5px}.tagline[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#666;margin-top:-5px;margin-bottom:20px}.register-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px;display:block;color:#333}.register-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ccc;border-radius:6px;margin-bottom:16px;font-size:14px;transition:border-color .2s}.register-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#2e8b57;outline:none;box-shadow:0 0 4px #2e8b5733}.register-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#2e8b57;color:#fff;font-weight:700;border:none;border-radius:6px;font-size:15px;cursor:pointer}.register-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#257247}.extra-links[_ngcontent-%COMP%]{text-align:center;margin-top:15px;font-size:14px}.extra-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2e8b57;font-weight:700;text-decoration:none}.extra-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.message[_ngcontent-%COMP%]{margin-top:15px;text-align:center;color:green}.password-wrapper[_ngcontent-%COMP%]{position:relative}.password-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:9px 38px 9px 10px;border:1px solid #ccc;border-radius:6px;margin-bottom:16px;font-size:14px;box-sizing:border-box}.toggle-icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:10px;transform:translateY(-50%);cursor:pointer;color:#888;font-size:16px}"]})};export{R as LoginComponent};
