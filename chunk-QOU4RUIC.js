import{b as M}from"./chunk-VARBTXGR.js";import{Ea as u,Gb as _,Hb as y,Ia as f,Ib as b,Kb as I,Pa as s,Sa as r,Ta as t,Ua as x,Za as h,_a as C,db as n,eb as p,fb as l,kb as c,lb as d,sa as g,va as o,za as v}from"./chunk-LATPFVPJ.js";function E(a,i){if(a&1&&(r(0,"div",4),n(1),t()),a&2){let e=h();o(),p(e.errorMessage)}}function O(a,i){if(a&1&&(r(0,"div",7)(1,"div",8),x(2,"span",9),r(3,"span",10),n(4),c(5,"titlecase"),t()(),r(6,"h3",11),n(7),c(8,"titlecase"),t(),r(9,"p")(10,"strong"),n(11,"Quantity:"),t(),n(12),t(),r(13,"p")(14,"strong"),n(15,"Price:"),t(),n(16),t(),r(17,"p")(18,"strong"),n(19,"Location:"),t(),n(20),c(21,"titlecase"),t(),r(22,"div",12)(23,"h4"),n(24,"Farmer Details"),t(),r(25,"p")(26,"strong"),n(27,"Name:"),t(),n(28),c(29,"titlecase"),t(),r(30,"p")(31,"strong"),n(32,"Email:"),t(),r(33,"a",13),n(34),t()(),r(35,"p")(36,"strong"),n(37,"Phone:"),t(),r(38,"a",13),n(39),t()()()()),a&2){let e=i.$implicit;o(4),p(d(5,12,e.type)),o(3),p(d(8,14,e.name)),o(5),l(" ",e.quantity," kg"),o(4),l(" ",e.pricePerUnit," Rs/kg"),o(4),l(" ",d(21,16,e.location),""),o(8),l(" ",d(29,18,e.farmer.name),""),o(5),C("href","mailto:",e.farmer.email,"",g),o(),p(e.farmer.email),o(4),C("href","tel:",e.farmer.phone,"",g),o(),p(e.farmer.phone)}}function S(a,i){if(a&1&&(r(0,"div",5),f(1,O,40,20,"div",6),t()),a&2){let e=h();o(),s("ngForOf",e.crops)}}function w(a,i){a&1&&(r(0,"div",14),n(1," No crops found. "),t())}var P=class a{constructor(i){this.http=i}allCrops=[];crops=[];errorMessage="";lastQuery="";ngOnInit(){this.getAllCrops()}ngDoCheck(){let i=localStorage.getItem("searchCropQuery")||"";i!==this.lastQuery&&(this.lastQuery=i,this.applyFilter(i))}getAllCrops(){let i=localStorage.getItem("token");if(!i){this.errorMessage="No auth token found. Please login again.";return}this.http.get("http://localhost:8000/FARMERSERVICE/farmers/crops/all",{headers:{Authorization:`Bearer ${i}`}}).subscribe({next:e=>{this.allCrops=e,this.applyFilter(localStorage.getItem("searchCropQuery")||"")},error:e=>{console.error("Error fetching crops:",e),this.errorMessage="Failed to load crops. Please try again later."}})}applyFilter(i){i?this.crops=this.allCrops.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())):this.crops=this.allCrops}static \u0275fac=function(e){return new(e||a)(v(M))};static \u0275cmp=u({type:a,selectors:[["app-dashboard"]],decls:5,vars:3,consts:[[1,"dashboard-container"],["class","error-message",4,"ngIf"],["class","cards-grid",4,"ngIf"],["class","no-crops",4,"ngIf"],[1,"error-message"],[1,"cards-grid"],["class","crop-card",4,"ngFor","ngForOf"],[1,"crop-card"],[1,"card-header"],[1,"crop-id"],[1,"crop-type"],[1,"crop-name"],[1,"farmer-info"],[3,"href"],[1,"no-crops"]],template:function(e,m){e&1&&(r(0,"div",0),x(1,"h2"),f(2,E,2,1,"div",1)(3,S,2,1,"div",2)(4,w,2,0,"div",3),t()),e&2&&(o(2),s("ngIf",m.errorMessage),o(),s("ngIf",m.crops.length>0),o(),s("ngIf",m.crops.length===0&&!m.errorMessage))},dependencies:[I,_,y,b],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1350px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#2c3e50}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;font-weight:700;font-size:2.4rem;color:#27ae60}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600;margin-bottom:20px;text-align:center}.no-crops[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#7f8c8d;margin-top:50px;font-size:1.2rem}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:23px;margin-top:100px}.crop-card[_ngcontent-%COMP%]{background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 10px #0000001a;padding:20px;transition:transform .2s ease,box-shadow .2s ease;display:flex;flex-direction:column;justify-content:space-between;cursor:default}.crop-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 20px #00000026}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-weight:600;margin-bottom:10px;color:#2980b9;font-size:.9rem}.crop-name[_ngcontent-%COMP%]{margin:0 0 15px;color:#27ae60;font-size:1.4rem;font-weight:700}.crop-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:1rem}.farmer-info[_ngcontent-%COMP%]{margin-top:15px;padding-top:10px;border-top:1px solid #ddd}.farmer-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.1rem;font-weight:600;color:#34495e}.farmer-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2980b9;text-decoration:none}.farmer-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{P as DashboardComponent};
