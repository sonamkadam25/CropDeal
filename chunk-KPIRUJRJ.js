import{a as E,b as P}from"./chunk-VARBTXGR.js";import{Ea as y,Gb as M,Hb as I,Ia as g,Ib as O,Kb as b,Pa as c,Sa as r,Ta as n,Ua as x,Za as C,cb as _,db as a,eb as l,fb as u,kb as m,lb as d,nb as v,va as i,za as h}from"./chunk-LATPFVPJ.js";function w(t,o){if(t&1&&(r(0,"div",4),a(1),n()),t&2){let e=C();i(),l(e.errorMessage)}}function F(t,o){if(t&1&&(r(0,"div",7)(1,"div",8),x(2,"span",9),r(3,"span",10),a(4),m(5,"titlecase"),n()(),r(6,"h3",11),a(7),m(8,"titlecase"),n(),r(9,"p")(10,"strong"),a(11,"Quantity:"),n(),a(12),n(),r(13,"p")(14,"strong"),a(15,"Location:"),n(),a(16),m(17,"titlecase"),n()()),t&2){let e=o.$implicit;i(4),l(d(5,4,e.type)),i(3),l(d(8,6,e.name)),i(5),u(" ",e.quantity," kg"),i(4),u(" ",d(17,8,e.location),"")}}function N(t,o){if(t&1&&(r(0,"div",5),g(1,F,18,10,"div",6),n()),t&2){let e=C();i(),c("ngForOf",e.crops)}}function T(t,o){t&1&&(r(0,"div",12),a(1,"No crops found for your account."),n())}var S=class t{constructor(o){this.http=o}crops=[];errorMessage="";ngOnInit(){let o=localStorage.getItem("token"),e=localStorage.getItem("email");if(!o||!e){this.errorMessage="No auth token or email found. Please login again.";return}let s=new E({Authorization:`Bearer ${o}`});this.http.get("http://localhost:8000/FARMERSERVICE/farmers/crops/all",{headers:s}).subscribe({next:p=>{if(this.crops=p.filter(f=>f.farmer.email===e),this.crops.length>0){let f=this.crops[0].farmer.id;localStorage.setItem("farmerId",f)}else this.errorMessage="No crops found for your account."},error:p=>{this.errorMessage="Failed to fetch crops.",console.error(p)}})}static \u0275fac=function(e){return new(e||t)(h(P))};static \u0275cmp=y({type:t,selectors:[["app-my-crops"]],decls:6,vars:3,consts:[["noCrops",""],[1,"dashboard-container"],["class","error-message",4,"ngIf"],["class","cards-grid",4,"ngIf","ngIfElse"],[1,"error-message"],[1,"cards-grid"],["class","crop-card",4,"ngFor","ngForOf"],[1,"crop-card"],[1,"card-header"],[1,"crop-price"],[1,"crop-type"],[1,"crop-name"],[1,"no-crops"]],template:function(e,s){if(e&1&&(r(0,"div",1),x(1,"h2"),g(2,w,2,1,"div",2)(3,N,2,1,"div",3)(4,T,2,0,"ng-template",null,0,v),n()),e&2){let p=_(5);i(2),c("ngIf",s.errorMessage),i(),c("ngIf",s.crops.length>0)("ngIfElse",p)}},dependencies:[b,M,I,O],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1350px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#2c3e50}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;font-weight:700;font-size:2.4rem;color:#27ae60}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600;margin-bottom:20px;text-align:center}.no-crops[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#7f8c8d;margin-top:50px;font-size:1.2rem}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:23px;margin-top:100px}.crop-card[_ngcontent-%COMP%]{background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 10px #0000001a;padding:20px;transition:transform .2s ease,box-shadow .2s ease;display:flex;flex-direction:column;justify-content:space-between;cursor:default}.crop-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 20px #00000026}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-weight:600;margin-bottom:10px;color:#2980b9;font-size:.9rem}.crop-price[_ngcontent-%COMP%]{color:#27ae60}.crop-name[_ngcontent-%COMP%]{margin:0 0 15px;color:#27ae60;font-size:1.4rem;font-weight:700}.crop-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:1rem}"]})};export{S as MyCropsComponent};
