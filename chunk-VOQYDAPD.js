import{a as P,b as m,c as x,d as h,f as C,h as _,i as v,m as y,o as M}from"./chunk-MDTR3QT2.js";import{d as b}from"./chunk-YHE6EI6Y.js";import{b as w}from"./chunk-VARBTXGR.js";import{Ea as f,Pa as p,Ra as g,Sa as e,Ta as r,Ua as s,Ya as c,db as n,va as i,za as d}from"./chunk-LATPFVPJ.js";var O=class u{constructor(l,o,t){this.fb=l;this.http=o;this.router=t;this.resetForm=this.fb.group({otp:["",m.required],newPassword:["",m.required],confirmPassword:["",m.required]})}resetForm;email=localStorage.getItem("resetEmail")||"";showPassword=!1;togglePasswordVisibility(){this.showPassword=!this.showPassword}resetPassword(){let{otp:l,newPassword:o,confirmPassword:t}=this.resetForm.value;if(o!==t){alert("Passwords don't match");return}this.http.post("http://localhost:8000/FARMERSERVICE/farmers/reset-password",{email:this.email,otp:l,newPassword:o},{responseType:"text"}).subscribe({next:()=>{alert("Password reset successful!"),localStorage.removeItem("resetEmail"),this.router.navigate(["/auth/login"])},error:a=>{console.error("Reset error:",a),alert(a.error?.message||a.error||"Failed to reset password")}})}static \u0275fac=function(o){return new(o||u)(d(y),d(w),d(b))};static \u0275cmp=f({type:u,selectors:[["app-reset-password"]],decls:27,vars:8,consts:[[1,"register-container"],[1,"register-card"],[1,"tagline"],[3,"ngSubmit","formGroup"],["type","email","disabled","",3,"value"],["type","text","formControlName","otp","placeholder","Enter the OTP sent to your email"],[1,"password-wrapper"],["formControlName","newPassword","placeholder","Create new password",3,"type"],[1,"toggle-icon",3,"click"],["formControlName","confirmPassword","placeholder","Confirm new password",3,"type"],["type","submit"]],template:function(o,t){o&1&&(e(0,"div",0)(1,"div",1)(2,"h2"),n(3,"\u{1F511} Reset Password"),r(),e(4,"p",2),n(5,"Enter OTP and set a new password"),r(),e(6,"form",3),c("ngSubmit",function(){return t.resetPassword()}),e(7,"label"),n(8,"Email"),r(),s(9,"input",4),e(10,"label"),n(11,"Enter OTP"),r(),s(12,"input",5),e(13,"label"),n(14,"New Password"),r(),e(15,"div",6),s(16,"input",7),e(17,"span",8),c("click",function(){return t.togglePasswordVisibility()}),s(18,"i"),r()(),e(19,"label"),n(20,"Confirm Password"),r(),e(21,"div",6),s(22,"input",9),e(23,"span",8),c("click",function(){return t.togglePasswordVisibility()}),s(24,"i"),r()(),e(25,"button",10),n(26,"Reset Password"),r()()()()),o&2&&(i(6),p("formGroup",t.resetForm),i(3),p("value",t.email),i(7),p("type",t.showPassword?"text":"password"),i(2),g(t.showPassword?"fa fa-eye":"fa fa-eye-slash"),i(4),p("type",t.showPassword?"text":"password"),i(2),g(t.showPassword?"fa fa-eye":"fa fa-eye-slash"))},dependencies:[M,C,P,x,h,_,v],styles:["body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background:linear-gradient(to right,#f7fcf7,#e2f1e9);margin:0;padding:0}.register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:100px;padding-bottom:50px;min-height:calc(130vh - 80px);background-color:#f3fdf4}.register-card[_ngcontent-%COMP%]{background-color:#fff;padding:30px 25px;border-radius:12px;box-shadow:0 4px 12px #00000014;width:100%;max-width:440px;border:1px solid #dfe9e4;margin-top:15px;height:545px}.register-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#2e8b57;margin-bottom:5px}.tagline[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#666;margin-top:-5px;margin-bottom:20px}.register-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px;display:block;color:#333}.register-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ccc;border-radius:6px;margin-bottom:16px;font-size:14px;transition:border-color .2s}.register-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#2e8b57;outline:none;box-shadow:0 0 4px #2e8b5733}.register-card[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{background-color:#f2f2f2;color:#888;cursor:not-allowed}.register-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#2e8b57;color:#fff;font-weight:700;border:none;border-radius:6px;font-size:15px;cursor:pointer}.register-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#257247}.password-wrapper[_ngcontent-%COMP%]{position:relative}.password-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:9px 38px 9px 10px;border:1px solid #ccc;border-radius:6px;margin-bottom:16px;font-size:14px;box-sizing:border-box}.toggle-icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:10px;transform:translateY(-50%);cursor:pointer;color:#888;font-size:16px}"]})};export{O as ResetPasswordComponent};
